{"pages":[{"title":"About","text":"","link":"/about/index.html"}],"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2020/04/hello-world/"},{"title":"Geant4安装教程","text":"","link":"/2020/04/Geant4%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"},{"title":"探索100服务器的使用-1配置环境","text":"前言关于课题组所租用的高性能计算平台“探索100”的使用将分为2个部分介绍，分别是“配置环境”（本文）和“日常操作”。本文将介绍如何配置登录和使用环境，成功配置以后就不用再看了；“日常使用”则作为平常运行计算时的参考，主治忘记了操作顺序，忘记了常用命令之类的问题。大体上，这两篇文章属于“照着操作能用”的指南，若需要更详细地了解硬件配置，运行过程等细节，可参考《探索100用户使用手册》等文件。 探索100服务器相比于个人计算机，优势在于核数多（740节点*12核=8880核），内存大（370个节点32GB，370个节点48GB），运行并行任务有显著的时间提升。因此我们在日常使用MCNP，Matlab，Geant，Talys等程序时，如果任务要求内存大，或者运行时间长，可以考虑使用探索100服务器加快计算。 整体思路本文主要就两点内容： 下载SSH终端 配置连接 配置用户名和密码 配置密钥登录 下载SSH终端 windows常见的SSH终端有PuTTY（轻便简单），Xshell（久负盛名，功能丰富），MobaXterm（笔者在用，功能强大）等等。择一从官网下载即可。之所以我选择MobaXterm是因为其默认在打开ssh连接的同时打开sftp连接，可以让我们很方便地上传和下载文件。 mac直接使用terminal的SSH命令即可，我没有尝试过，欢迎了解的同学私信我添加这部分内容。 Linux直接使用terminal的SSH命令即可，我没有尝试过，欢迎了解的同学私信我添加这部分内容。 配置连接下面以MobaXterm软件为例介绍如何配置用户名密码及密钥。 点击Session 点击SSH 输入远程主机ip 打开“MobaXterm password settings”页面 点击“Credentials” 新建 输入Name（方便自己识别的名字，可以任意取） 输入用户名和密码（看课题组资料） 确定 点击“OK”关闭“MobaXterm password settings”页面 勾选“Specify username” 下拉菜单 选择第7步设置的Name 打开“Advanced SSH settings” 勾选“Use private key” 选择私钥文件（课题组资料中的key文件） 确认这时在主界面的左边栏会出现一个黑底黄钥匙的图标，代表一个ssh连接，此时双击它会报错“无法连接”，这是因为我们还没有连接“探索100”服务器的VPN，操作方法请看下一篇文章。","link":"/2020/04/TS100-1/"},{"title":"探索100服务器的使用-2日常操作","text":"前言关于探索100的使用，准备分为2个部分来介绍，分别是“”和“日常操作”（本文）。如果你是第一次接触“探索100”高性能计算平台，请先看“配置环境”一文。本文介绍的是最基础的提交作业及运行的操作，更详细的指南可参考《探索100用户使用手册》。 整体思路让我们假设你手头某一计算任务需要很长时间的计算，例如MCNP需要40小时的运行才能得到想要的结果。这时候寻求计算平台的帮助是很合理的了。那么，你准备好计算所需的文件（MCNP的“.i”文件，matlab的“.m”文件等）后，接下来要做的是这些事： 使用ie打开vpn 登录“探索100”前端机 准备工作目录 提交作业 检查执行情况 查看结果 ==强烈建议先在本机完整运行一次程序（使用较小的粒子数nps或较少的循环数）以便排除bug。== 自己电脑上都跑不通的代码服务器上肯定跑不通。—-某传奇师兄 使用ie打开vpn以管理员身份运行ie浏览器我也不知道为啥只能用ie, 输入前端机的完整ip地址（看课题组资料） https://166.???.???.???:?/?/?/?.cgi 在打开的页面中输入用户名和密码（看课题组资料“VPN”），以及不区分大小写的验证码，“类别”选择local。 若提示需要安装activeX，则按要求安装，然后重启ie（管理员身份运行） 登录“探索100”前端机打开你所使用的ssh软件，这里以MobaXterm为例。双击左侧栏“Sessions”中的ssh连接，若出现下面的提示，则需在右边的黑色区域输入私钥的密码（参考课题组资料“密钥”），输入时没有任何显示，输完回车即可。 出现下图表示登录成功 准备工作目录若之前做过这一步，可以跳过。 进入工作目录 1cd ~/WORK1 新建自己名字的文件夹并进入 12mkdir [yourname]cd [yourname] 上载计算文件在左侧sftp窗口路径栏中输入自己的工作文件夹，回车 1/work1/yangyg_work/[yourname] 点击上传按钮选择自己准备好的计算文件，等待进度条跑完即上传完成。也可以直接选中本地的文件，拖动至sftp窗口中即可。 提交作业在服务器上提交计算任务是以脚本的形式进行的，和本机有区别。==切勿在终端直接运行自己的程序==。在家目录/home/yangyg/下已经准备好了提交mcnp任务的脚本模板mcnpscript和matlab任务的脚本模板matlabscript可以将其复制入自己的文件夹 1cp /home/yangyg/mcnpscript /work1/yangyg_work/[yourname] 然后按需修改内容 1nano mcnpscript 该脚本内容大体如下： 1234567891011#!/bin/sh#BSUB -q hpc_linux#BSUB -a intelmpi#BSUB -R &quot;select[mem&gt;20000]&quot;#BSUB -n 60#BSUB -o %J.output#BSUB -e %J.error#BSUB -J namemfn=&quot;name&quot;mpirun.lsf mcnp5.mpi.impi_intel i=$mfn.i o=$mfn.o r=$mfn.r 大部分情况要注意的参数是这些-q：提交队列，可选hpc_linux（需要的内存大于32G的作业），short（运行时间小于10分钟的作业），normal（其它普通作业），priority（临时紧急任务，需要向系统管理员申请使用权限）。-n：申请核心数，单用户最大240，建议使用12的整数倍以独占计算节点。经验上看mcnp作业一般用60比较合适，大于72有可能导致运行速度不明原因骤降。如果需要mcnp输出ptrac文件则只能用1。-J：作业名称，取自己易识别的名称最后两行为执行命令，和个人电脑上的命令基本一致。 确认脚本和输入文件正确后，在terminal输入下面的命令提交作业 1bsub&lt;mcnpscript ==注意是小于号&lt;==若出现无法提交，需等待60s重试的提示，表示提交的作业总共申请的核数达到了最大值。先按ctrl+C取消，同正在计算的组内同学协调，杀死部分作业或者待现有作业执行完毕后再提交。 作业提交后就可以关闭ssh软件，待运行结束再重新登录下载数据，但强烈建议等作业跑起来检查一下是否有报错、提前结束等异常情况，以便及时处理。如果是时间较长的作业，最好在运行中也定时检查一下。 检查执行情况在terminal中可使用以下常用命令bjobs：查看未完成的作业列表，STAT一列的PEND表示正在排队,RUN表示正在运行，其它状态需及时联系管理员确认原因。bjobs -l 作业号：查看作业运行的资源消耗情况bpeek 作业号：查看作业运行的标准bkill 作业号：杀死作业，执行后需等待约1分钟bjobs中该作业才会消失。 查看结果作业运行完毕，bjobs中该作业号消失，作业的输出文件（例如mcnp的“.o”等文件），作业的执行日志等均保存到了提交作业时的目录下，可按需查看和下载（在左侧sftp窗口中点选后右键下载，或者选中后直接拖至本地文件夹内）一般来说作业号.error 为空文件，非空意味着作业执行有误，最常见的错误是提交脚本mcnpscript文件在windows下编辑，出现了“换行符错误”。这种情况只需重新复制家目录下的脚本模板，在终端修改即可。 作业号.output 为作业的标准输出（相当于在个人电脑上运行时，cmd界面中显示的那些内容），若mcnp模型有误，错误信息在本文件中。 简而言之，计算软件的报错信息在作业号.output 中；作业提交中的错误信息在作业号.error 中。","link":"/2020/04/TS100-2/"}],"tags":[],"categories":[]}